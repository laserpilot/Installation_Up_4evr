<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Installation Up 4evr - Mac Automation Tool</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1><i class="fas fa-desktop"></i> Installation Up 4evr</h1>
                <p>Automate Mac setup for creative technology installations</p>
            </div>
            <div class="status-indicators">
                <div class="status-indicator" id="server-status">
                    <i class="fas fa-circle"></i> Server
                </div>
                <div class="status-indicator" id="sip-status">
                    <i class="fas fa-shield-alt"></i> SIP
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Tab Navigation -->
            <div class="tab-container">
                <div class="tab-nav">
                    <button class="tab-button active" data-tab="system-prefs">
                        <i class="fas fa-cog"></i> System Preferences
                    </button>
                    <button class="tab-button" data-tab="launch-agents">
                        <i class="fas fa-rocket"></i> Launch Agents
                    </button>
                    <button class="tab-button" data-tab="monitoring">
                        <i class="fas fa-chart-line"></i> Monitoring Dashboard
                    </button>
                    <button class="tab-button" data-tab="service-control">
                        <i class="fas fa-server"></i> Service Control
                    </button>
                </div>

                <!-- Tab Content -->
                <div class="tab-content">
                    <!-- System Preferences Tab -->
                    <div id="system-prefs-tab" class="tab-pane active">
                        <section class="card">
                <h2><i class="fas fa-cog"></i> System Preferences</h2>
                <p>Configure macOS settings for 24/7 installation use</p>
                
                <div class="preferences-container">
                    <!-- Required Settings -->
                    <div class="preference-group">
                        <h3><i class="fas fa-exclamation-circle text-red"></i> Required Settings</h3>
                        <div id="required-settings" class="settings-grid">
                            <!-- Populated by JavaScript -->
                        </div>
                    </div>

                    <!-- Optional Settings -->
                    <div class="preference-group">
                        <h3><i class="fas fa-plus-circle text-yellow"></i> Optional Settings</h3>
                        <div id="optional-settings" class="settings-grid">
                            <!-- Populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button id="verify-settings" class="btn btn-secondary">
                        <i class="fas fa-search"></i> Verify Current Settings
                    </button>
                    <button id="apply-required" class="btn btn-primary">
                        <i class="fas fa-check-circle"></i> Apply Required Settings
                    </button>
                    <button id="apply-selected" class="btn btn-success">
                        <i class="fas fa-play"></i> Apply Selected Settings
                    </button>
                </div>
                        </section>
                    </div>

                    <!-- Launch Agents Tab -->
                    <div id="launch-agents-tab" class="tab-pane">
                        <section class="card">
                <h2><i class="fas fa-rocket"></i> Launch Agents</h2>
                <p>Create launch agents to keep your apps running forever</p>
                
                <!-- Drag and Drop Zone -->
                <div class="drop-zone" id="app-drop-zone">
                    <div class="drop-zone-content">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <h3>Drag & Drop Your App Here</h3>
                        <p>Or click to browse for .app files</p>
                        <input type="file" id="app-file-input" accept=".app" style="display: none;">
                    </div>
                </div>

                <!-- App Info Display -->
                <div id="app-info" class="app-info" style="display: none;">
                    <div class="app-display">
                        <div class="app-icon">
                            <i class="fas fa-cube"></i>
                        </div>
                        <div class="app-details">
                            <h3 id="app-name">App Name</h3>
                            <p id="app-path">App Path</p>
                            <div class="app-meta">
                                <span id="app-version">Version</span>
                                <span id="app-bundle-id">Bundle ID</span>
                            </div>
                        </div>
                    </div>

                    <!-- Launch Agent Options -->
                    <div class="launch-options">
                        <h4><i class="fas fa-wrench"></i> Launch Agent Options</h4>
                        <div class="options-grid">
                            <label class="checkbox-label">
                                <input type="checkbox" id="keep-alive" checked>
                                <span class="checkbox-custom"></span>
                                Keep Alive (restart if crashes)
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="successful-exit" checked>
                                <span class="checkbox-custom"></span>
                                Allow manual quit
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="run-at-load" checked>
                                <span class="checkbox-custom"></span>
                                Run at login
                            </label>
                        </div>
                        
                        <div class="form-group">
                            <label for="custom-label">Custom Label (optional):</label>
                            <input type="text" id="custom-label" placeholder="com.yourcompany.app.up4evr">
                        </div>
                    </div>

                    <div class="action-buttons">
                        <button id="create-launch-agent" class="btn btn-primary">
                            <i class="fas fa-plus"></i> Create Launch Agent
                        </button>
                        <button id="install-launch-agent" class="btn btn-success">
                            <i class="fas fa-rocket"></i> Install & Start
                        </button>
                    </div>
                </div>

                <!-- Existing Launch Agents -->
                <div class="existing-agents">
                    <h4><i class="fas fa-list"></i> Existing Launch Agents</h4>
                    <div id="launch-agents-list" class="agents-list">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>
                        </section>
                    </div>

                    <!-- Monitoring Dashboard Tab -->
                    <div id="monitoring-tab" class="tab-pane">
                        <section class="card">
                            <h2><i class="fas fa-chart-line"></i> Monitoring Dashboard</h2>
                            <p>Real-time system monitoring and installation health</p>
                            
                            <!-- System Overview -->
                            <div class="monitoring-grid">
                                <div class="metric-card">
                                    <h3><i class="fas fa-microchip"></i> CPU Usage</h3>
                                    <div class="metric-value" id="cpu-usage">--</div>
                                    <div class="metric-bar">
                                        <div class="metric-fill" id="cpu-bar"></div>
                                    </div>
                                </div>
                                
                                <div class="metric-card">
                                    <h3><i class="fas fa-memory"></i> Memory Usage</h3>
                                    <div class="metric-value" id="memory-usage">--</div>
                                    <div class="metric-bar">
                                        <div class="metric-fill" id="memory-bar"></div>
                                    </div>
                                </div>
                                
                                <div class="metric-card">
                                    <h3><i class="fas fa-hdd"></i> Disk Usage</h3>
                                    <div class="metric-value" id="disk-usage">--</div>
                                    <div class="metric-bar">
                                        <div class="metric-fill" id="disk-bar"></div>
                                    </div>
                                </div>
                                
                                <div class="metric-card">
                                    <h3><i class="fas fa-heartbeat"></i> System Health</h3>
                                    <div class="health-status" id="health-status">
                                        <span class="health-indicator" id="health-indicator">ðŸŸ¡</span>
                                        <span id="health-text">Checking...</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Alerts and Notifications -->
                            <div class="alerts-section">
                                <h3><i class="fas fa-bell"></i> Active Alerts</h3>
                                <div id="alerts-container" class="alerts-container">
                                    <!-- Alerts populated by JavaScript -->
                                </div>
                            </div>
                            
                            <!-- System Details -->
                            <div class="details-grid">
                                <div class="detail-card">
                                    <h4><i class="fas fa-desktop"></i> Display Status</h4>
                                    <div id="display-status" class="detail-content">Loading...</div>
                                </div>
                                
                                <div class="detail-card">
                                    <h4><i class="fas fa-network-wired"></i> Network Status</h4>
                                    <div id="network-status" class="detail-content">Loading...</div>
                                </div>
                                
                                <div class="detail-card">
                                    <h4><i class="fas fa-clock"></i> Installation Uptime</h4>
                                    <div id="uptime-status" class="detail-content">Loading...</div>
                                </div>
                                
                                <div class="detail-card">
                                    <h4><i class="fas fa-cogs"></i> Monitored Apps</h4>
                                    <div id="apps-status" class="detail-content">Loading...</div>
                                </div>
                            </div>
                        </section>
                    </div>

                    <!-- Service Control Tab -->
                    <div id="service-control-tab" class="tab-pane">
                        <section class="card">
                            <h2><i class="fas fa-server"></i> Backend Service Control</h2>
                            <p>Manage the Installation Up 4evr backend service</p>
                            
                            <!-- Service Status -->
                            <div class="service-status-section">
                                <div class="service-status-card">
                                    <div class="service-status-header">
                                        <h3><i class="fas fa-info-circle"></i> Service Status</h3>
                                        <div class="service-status-indicator" id="service-status-indicator">
                                            <span class="service-status-icon" id="service-status-icon">ðŸŸ¡</span>
                                            <span class="service-status-text" id="service-status-text">Checking...</span>
                                        </div>
                                    </div>
                                    
                                    <div class="service-details">
                                        <div class="service-detail">
                                            <label>Process ID:</label>
                                            <span id="service-pid">--</span>
                                        </div>
                                        <div class="service-detail">
                                            <label>Uptime:</label>
                                            <span id="service-uptime">--</span>
                                        </div>
                                        <div class="service-detail">
                                            <label>Port:</label>
                                            <span id="service-port">3001</span>
                                        </div>
                                        <div class="service-detail">
                                            <label>Mode:</label>
                                            <span id="service-mode">Electron-managed</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Service Controls -->
                            <div class="service-controls-section">
                                <h3><i class="fas fa-gamepad"></i> Service Controls</h3>
                                <div class="service-buttons">
                                    <button id="restart-backend" class="btn btn-warning">
                                        <i class="fas fa-redo"></i> Restart Backend
                                    </button>
                                    <button id="stop-backend" class="btn btn-danger">
                                        <i class="fas fa-stop"></i> Stop Backend
                                    </button>
                                    <button id="start-backend" class="btn btn-success" style="display: none;">
                                        <i class="fas fa-play"></i> Start Backend
                                    </button>
                                    <button id="install-service" class="btn btn-primary">
                                        <i class="fas fa-download"></i> Install as System Service
                                    </button>
                                </div>
                                
                                <div class="service-help">
                                    <p><i class="fas fa-info-circle"></i> <strong>Service Management:</strong></p>
                                    <ul>
                                        <li><strong>Restart Backend:</strong> Restart the current backend process</li>
                                        <li><strong>Stop/Start Backend:</strong> Control the backend service manually</li>
                                        <li><strong>Install as System Service:</strong> Set up backend to auto-start on boot</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <!-- Service Logs -->
                            <div class="service-logs-section">
                                <h3><i class="fas fa-file-alt"></i> Service Logs</h3>
                                <div class="logs-controls">
                                    <button id="refresh-logs" class="btn btn-secondary">
                                        <i class="fas fa-sync"></i> Refresh
                                    </button>
                                    <button id="clear-logs" class="btn btn-secondary">
                                        <i class="fas fa-trash"></i> Clear
                                    </button>
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="auto-refresh-logs" checked>
                                        <span class="checkbox-custom"></span>
                                        Auto-refresh logs
                                    </label>
                                </div>
                                <div class="logs-container" id="service-logs">
                                    <div class="log-entry">
                                        <span class="log-timestamp">[Loading...]</span>
                                        <span class="log-level">INFO</span>
                                        <span class="log-message">Fetching service logs...</span>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
            </div>

            <!-- Results Section -->
            <section class="card results-section" id="results-section" style="display: none;">
                <h2><i class="fas fa-terminal"></i> Results</h2>
                <div id="results-content" class="results-content">
                    <!-- Results populated by JavaScript -->
                </div>
            </section>
        </main>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay" style="display: none;">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Processing...</p>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>

    <script src="script.js"></script>
</body>
</html>